let DynamicTool=(()=>{let render=(toolName,Awesome)=>{Awesome.getToolTpl(toolName).then(html=>{if(!html)return void(confirm("检测到当前指定的工具还未安装，这就去设置页面安装工具！")?location.replace("../options/index.html"):window.close());document.write(html),DarkModeMgr.turnLightAuto(),document.body.style.display="none";let elLoading=document.createElement("div");elLoading.style.cssText="position:fixed;top:0;left:0;right:0;height:30px;text-align:right;color:#ddd;z-index:1000;font-size:14px",elLoading.textContent="Tool loading, hold on...",document.querySelector("html").appendChild(elLoading);let list=document.querySelectorAll("dynamic[data-source]");if(!list.length)return;let allJs=[],allCss=[];for(let e=0;e<list.length;e++){let t=list[e],l=t.getAttribute("data-type"),o=t.getAttribute("data-source")||"",n=o.split(",").map(e=>{if(-1!==e.indexOf("?")){let t=e.split("?");t.pop(),e=t.join("")}return e});"js"===l?allJs=allJs.concat(n):allCss=allCss.concat(n)}Promise.all([Awesome.StorageMgr.get(allCss),Awesome.StorageMgr.get(allJs)]).then(values=>{if(elLoading.remove(),document.body.style.display="block",allCss=allCss.map(e=>values[0][e]).join(" "),allCss.length){let e=document.createElement("style");e.textContent=allCss,document.head.appendChild(e)}allJs=allJs.map(e=>values[1][e]).join(";"),allJs.length&&eval(allJs)})})},init=()=>{let e=new URL(location.href).searchParams.get("tool");e?import("./awesome.js").then(t=>{render(e,t.default)}):location.replace("../options/index.html")};return{init:init}})();DynamicTool.init();