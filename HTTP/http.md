**HTTP 报文的组成部分**

**请求报文**

- 请求行 ( http 方法 + 页面地址 + http 协议 + 版本)
- 请求头( key + value 值)
- 空行(服务端通过空行来判断下一部分不再是请求头，而当做请求体来解析)
- 请求体(数据部分)

**响应报文**

- 状态行 + 响应头 + 空行 + 响应体

**常见状态码**

- `1xx`: 接受，继续处理
- `200`: 成功，并返回数据
- `201`: 已创建
- `202`: 已接受
- `203`: 成为，但未授权
- `204`: 成功，无内容
- `205`: 成功，重置内容
- `206`: 成功，部分内容
- `301`: 永久移动，重定向
- `302`: 临时移动，可使用原有URI
- `304`: 资源未修改，可使用缓存
- `305`: 需代理访问
- `400`: 请求语法错误
- `401`: 要求身份认证
- `403`: 拒绝请求
- `404`: 资源不存在
- `500`: 服务器错误

**从输入URL到呈现页面过程**

### 详细

**HTTP请求示意图**

![img](D:\memo\JavaScript\img\1b49976aca2c700883d48d927f48986c.png)

> 浏览器中的HTTP请求从发起到结束一共经历了如下八个阶段：构建请求、查找缓存、准备IP和端口、等待TCP队列、建立TCP连接、发起HTTP请求、服务器处理请求、服务器返回请求和断开连接

- 用户输入url并回车

- 浏览器进程检查url，组装协议，构成完整的url

- 浏览器进程通过进程间通信（IPC）把url请求发送给网络进程

- 网络进程接收到url请求后检查本地缓存是否缓存了该请求资源，如果有则将该资源返回给浏览器进程

- 如果没有，网络进程向web服务器发起http请求（网络请求），请求流程如下

  ：

  - 进行DNS解析，获取服务器`ip`地址，端口
  - 利用`ip`地址和服务器建立`tcp`连接
  - 构建请求头信息
  - 发送请求头信息服务器响应后，网络进程接收响应头和响应信息，并解析响应内容

- 网络进程解析响应流程

  :

  - 检查状态码，如果是301/302，则需要重定向，从Location自动中读取地址，重新进行第4步，如果是200，则继续处理请求
  - 200响应处理：检查响应类型Content-Type，如果是字节流类型，则将该请求提交给下载管理器，该导航流程结束，不再进行后续的渲染，如果是html则通知浏览器进程准备渲染进程准备进行染

- 准备渲染进程

  - 浏览器进程检查当前url是否和之前打开的渲染进程根域名是否相同，如果相同，则复用原来的进程，如果不同，则开启新的渲染进程

- 传输数据、更新状态

  - 渲染进程准备好后，浏览器向渲染进程发起“提交文档”的消息，渲染进程接收到消息和网络进程建立传输数据的“管道”
  - 渲染进程接收完数据后，向浏览器发送“确认提交”
  - 浏览器进程接收到确认消息后更新浏览器界面状态：安全、地址栏url、前进后退的历史状态、更新web页面