## 表单基础

表单在html中是以<from>标签存在的，而在javascript中表单是以HTMLFormElement的类型存在的，它继承自HTMLElement.因此拥有和其他HTML相同的属性，也拥有自己的属性

```
 acceptCharset：服务器可以接收的字符集，等价于 HTML 的 accept-charset 属性。
 action：请求的 URL，等价于 HTML 的 action 属性。
 elements：表单中所有控件的 HTMLCollection。
 enctype：请求的编码类型，等价于 HTML 的 enctype 属性。
 length：表单中控件的数量。
 method：HTTP 请求的方法类型，通常是"get"或"post"，等价于 HTML 的 method 属性。
 name：表单的名字，等价于 HTML 的 name 属性。
 reset()：把表单字段重置为各自的默认值。
 submit()：提交表单。
 target：用于发送请求和接收响应的窗口的名字，等价于 HTML 的 target 属性。
```

## 对元素的引用的方式：

```
1.let form = document.getElementById("form1"); 
2.使用 document.forms 集合可以获取页面上所有的表单元素。然后，可以进一步使用数字
索引或表单的名字（name）来访问特定的表单
// 取得页面中的第一个表单
let firstForm = document.forms[0]; 
// 取得名字为"form2"的表单
let myForm = document.forms["form2"]; 
3.早期的浏览器中document中拥有表单的name属性,可以通过document.form表单的属性名来访问
```

## 提交表单的方式:

```
表单可以通过用户点击按钮，图片提交。也可以通过js的方式提交
<!-- 通用提交按钮 --> 
<input type="submit" value="Submit Form"> 
<!-- 自定义提交按钮 --> 
<button type="submit">Submit Form</button> 
<!-- 图片按钮 --> 
<input type="image" src="graphic.gif"> 
在上述按钮提交方式中，如果焦点在某一个表单控件上，回车键也可以提交。没有提交按钮的无法按回车健提交

阻止表单提交的方式：
let form = document.getElementById("myForm"); 
form.addEventListener("submit", (event) => { 
 // 阻止表单提交
 event.preventDefault(); 
});

通过javascript方式提交表单:
let form = document.getElementById("myForm"); 
// 提交表单
form.submit();
通过js提交的方式无法触发submit事件


解决表单重复提交的方式：
1.表单提交之后，禁用提交按钮
2.通过onsubmit事件后取消后面的提交
```

## 表单重置

   

```
<!-- 通用重置按钮 --> 
<input type="reset" value="Reset Form"> 
<!-- 自定义重置按钮 --> 
<button type="reset">Reset Form</button>

阻止表单的重置：
let form = document.getElementById("myForm"); 
form.addEventListener("reset", (event) => { 
 event.preventDefault(); 
}); 
与表单提交一样，重置表单也可以通过 JavaScript 调用 reset()方法来完成，如下面的例子所示：
let form = document.getElementById("myForm"); 
// 重置表单
form.reset();
与 submit()方法的功能不同，调用 reset()方法会像单击了重置按钮一样触发 reset 事件。
```

## 表单字段

```
所有表单元素都是表单elements 属性（元素集合）中包含的一个值。这个 elements 集合是一个有序列表，包含对表单中所
有字段的引用，包括所有<input>、<textarea>、<button>、<select>和<fieldset>元素。elements
集合中的每个字段都以它们在 HTML 标记中出现的次序保存，可以通过索引位置和 name 属性来访问
let form = document.getElementById("form1"); 
// 取得表单中的第一个字段
let field1 = form.elements[0]; 
// 取得表单中名为"textbox1"的字段
let field2 = form.elements["textbox1"]; 
// 取得字段的数量
let fieldCount = form.elements.length; 

当多个name重名的时候，会返回所有重名元素的HTMLCollection集合
也可以通过表单属性的方式访问表单字段，比如 form[0]这种使用索引和 form 
["color"]这种使用字段名字的方式。访问这些属性与访问 form.elements 集合是一样
的。这种方式是为向后兼容旧版本浏览器而提供的，实际开发中应该使用 elements。
```

#### 表单字段的公共属性

```
 disabled：布尔值，表示表单字段是否禁用。
 form：指针，指向表单字段所属的表单。这个属性是只读的。
 name：字符串，这个字段的名字。
 readOnly：布尔值，表示这个字段是否只读。
 tabIndex：数值，表示这个字段在按 Tab 键时的切换顺序。
 type：字符串，表示字段类型，如"checkbox"、"radio"等。
 value：要提交给服务器的字段值。对文件输入字段来说，这个属性是只读的，仅包含计算机上
某个文件的路径


这里面除了 form 属性以外，JavaScript 可以动态修改任何属性
```

#### 表单字段的公共方法

```
表达字段都有的公共方法：focus()和blur()

focus()方法主要用来引起用户对页面中某个部分的注意。比如，在页
面加载后把焦点定位到表单中第一个字段就是很常见的做法。实现方法是监听 load 事件，然后在第一
个字段上调用 focus()，如下所示：
window.addEventListener("load", (event) => { 
 document.forms[0].elements[0].focus(); 
}); 
注意，如果表单中第一个字段是 type 为"hidden"的<input>元素，或者该字段被 CSS 属性
display 或 visibility 隐藏了，以上代码就会出错


HTML5 为表单字段增加了 autofocus 属性，支持的浏览器会自动为带有该属性的元素设置焦点，
而无须使用 JavaScript。比如：
<input type="text" autofocus>
```

#### 表单字段的公共事件

```
除了鼠标、键盘、变化和 HTML 事件外，所有字段还支持以下 3 个事件

 blur：在字段失去焦点时触发。
 change：在<input>和<textarea>元素的 value 发生变化且失去焦点时触发，或者在
<select>元素中选中项发生变化时触发。
 focus：在字段获得焦点时触发。
```

## 文本框编程

```
input默认type是text,size 属性指定文本框的宽度,value可以指定初始值。maxLength指定最多字符个数。不要使用 setAttribute()
设置<input>元素 value 属性的值，也不要尝试修改<textarea>元素的第一个子节点。对 value 属性的修改也不会总体现在 DOM 中，因此在处理文本框值的时候最好不要使用 DOM 方法。
两种文本框都支持一个名为 select()的方法，此方法用于全部选中文本框中的文本。

select事件，input textarea都支持，在 IE9+、Opera、Firefox、Chrome 和 Safari 中，select 事件
会在用户选择完文本后立即触发；在 IE8 及更早版本中，则会在第一个字符被选中时触发。另外，调用
select()方法也会触发 select 事件

取得选中文本数据，html5中增加了selectionStart和selectionEnd两个属性。
function getSelectedText(textbox){ 
 return textbox.value.substring(textbox.selectionStart, 
 textbox.selectionEnd); 
}
//ie8以下版本不支持该属性
//兼容ie8以下版本
function getSelectedText(textbox){ 
 if (typeof textbox.selectionStart == "number"){ 
 return textbox.value.substring(textbox.selectionStart, 
 textbox.selectionEnd); 
 } else if (document.selection){ 
 return document.selection.createRange().text; 
 } 
} 
```

#### 输入过滤

```
例如需要让用户输入手机号时，只能输入数字，可以监听keypress事件，屏蔽部分字符，需要检查事件的charCode属性：
textbox.addEventListener("keypress", (event) => { 
 if (!/\d/.test(String.fromCharCode(event.charCode)) && 
 event.charCode > 9 && 
 !event.ctrlKey){ 
 event.preventDefault(); 
 }
}); 
```

### 处理剪贴板

```
和剪贴板相关的事件:
 beforecopy：复制操作发生前触发。
 copy：复制操作发生时触发。
 beforecut：剪切操作发生前触发。
 cut：剪切操作发生时触发。
 beforepaste：粘贴操作发生前触发。
 paste：粘贴操作发生时触发。
function getClipboardText(event){ 
 var clipboardData = (event.clipboardData || window.clipboardData); 
 return clipboardData.getData("text"); 
} 
function setClipboardText (event, value){ 
 if (event.clipboardData){ 
 return event.clipboardData.setData("text/plain", value); 
 } else if (window.clipboardData){ 
 return window.clipboardData.setData("text", value); 
 } 
} 

textbox.addEventListener("paste", (event) => { 
 let text = getClipboardText(event); 
 if (!/^\d*$/.test(text)){ 
 event.preventDefault();
  } 
}); 
//粘贴数字
```

#### 自动切换

```
<input type="text" name="tel1" id="txtTel1" maxlength="3"> 
<input type="text" name="tel2" id="txtTel2" maxlength="3"> 
<input type="text" name="tel3" id="txtTel3" maxlength="4"> 
<script> 
 function tabForward(event){ 
 let target = event.target; 
 if (target.value.length == target.maxLength){ 
 let form = target.form; 
 for (let i = 0, len = form.elements.length; i < len; i++) { 
 if (form.elements[i] == target) { 
 if (form.elements[i+1]) { 
 form.elements[i+1].focus(); 
 } 
 return; 
 } 
 } 
 } 
 } 
 let inputIds = ["txtTel1", "txtTel2", "txtTel3"]; 
 for (let id of inputIds) { 
 let textbox = document.getElementById(id); 
 textbox.addEventListener("keyup", tabForward); 
 } 
</script>
```

